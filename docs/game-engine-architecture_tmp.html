<!DOCTYPE html>
<html>
<head>
<title>game-engine-architecture.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="game-engine-architecture-guide">Game Engine Architecture Guide</h1>
<p>A comprehensive guide for building a cross-platform C++ game engine with multi-backend graphics, Lua scripting, and Dear ImGui tooling. Primary target: macOS (Apple Silicon + Intel).</p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#1-overall-engine-architecture">Overall Engine Architecture</a></li>
<li><a href="#2-graphics-abstraction-design-patterns">Graphics Abstraction Design Patterns</a></li>
<li><a href="#3-imgui--moltenvk-integration">ImGui + MoltenVK Integration</a></li>
<li><a href="#4-lua-scripting-architecture">Lua Scripting Architecture</a></li>
<li><a href="#5-build-system-setup-cmake--vcpkg">Build System Setup (CMake + vcpkg)</a></li>
<li><a href="#6-ide-setup-and-development-workflow">IDE Setup and Development Workflow</a></li>
<li><a href="#appendix-recommended-libraries">Appendix: Recommended Libraries</a></li>
</ol>
<hr>
<h2 id="1-overall-engine-architecture">1. Overall Engine Architecture</h2>
<h3 id="high-level-module-diagram">High-Level Module Diagram</h3>
<pre class="hljs"><code><div>┌─────────────────────────────────────────────────────────────────────────────┐
│                              APPLICATION LAYER                               │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐ │
│  │    Game     │  │   Editor    │  │  Launcher   │  │   Asset Processor   │ │
│  │  Runtime    │  │  (ImGui)    │  │             │  │   (Offline Tool)    │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────┤
│                              ENGINE LAYER                                    │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                         SCRIPTING (Lua + sol2)                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────────┐  │
│  │    Scene     │  │   Physics    │  │    Audio     │  │   Animation    │  │
│  │   Manager    │  │   (Jolt)     │  │ (miniaudio)  │  │    System      │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  └────────────────┘  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────────┐  │
│  │     ECS      │  │   Assets     │  │     UI       │  │   Networking   │  │
│  │   (EnTT)     │  │   Manager    │  │   System     │  │   (optional)   │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  └────────────────┘  │
├─────────────────────────────────────────────────────────────────────────────┤
│                              CORE LAYER                                      │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    RENDER HARDWARE INTERFACE (RHI)                     │ │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────────┐   │ │
│  │  │   OpenGL   │  │   Vulkan   │  │   Metal    │  │    WebGPU      │   │ │
│  │  │  Backend   │  │  Backend   │  │  Backend   │  │   (future)     │   │ │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────────┘   │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────────┐  │
│  │   Platform   │  │    Math      │  │   Memory     │  │     Job        │  │
│  │  Abstraction │  │   (GLM)      │  │   System     │  │    System      │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  └────────────────┘  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────────┐  │
│  │   Logging    │  │  Profiling   │  │   Events     │  │   File I/O     │  │
│  │   System     │  │   System     │  │   System     │  │   (VFS)        │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  └────────────────┘  │
├─────────────────────────────────────────────────────────────────────────────┤
│                              PLATFORM LAYER                                  │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      WINDOW &amp; INPUT (SDL3 / GLFW)                      │ │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────────┐   │ │
│  │  │   macOS    │  │  Windows   │  │   Linux    │  │      Web       │   │ │
│  │  └────────────┘  └────────────┘  └────────────┘  └────────────────┘   │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
</div></code></pre>
<h3 id="directory-structure">Directory Structure</h3>
<pre class="hljs"><code><div>engine/
├── CMakeLists.txt              # Root CMake
├── vcpkg.json                  # Package manifest
├── .clang-format               # Code style
├── .clangd                     # LSP config
│
├── engine/                     # Core engine library
│   ├── CMakeLists.txt
│   ├── include/engine/         # Public headers
│   │   ├── core/
│   │   │   ├── Application.hpp
│   │   │   ├── Logger.hpp
│   │   │   ├── Memory.hpp
│   │   │   └── Types.hpp
│   │   ├── rhi/                # Render Hardware Interface
│   │   │   ├── RHI.hpp
│   │   │   ├── Buffer.hpp
│   │   │   ├── Texture.hpp
│   │   │   ├── Shader.hpp
│   │   │   ├── Pipeline.hpp
│   │   │   └── CommandBuffer.hpp
│   │   ├── scene/
│   │   ├── scripting/
│   │   └── ...
│   │
│   └── src/                    # Private implementation
│       ├── core/
│       ├── rhi/
│       │   ├── opengl/
│       │   ├── vulkan/
│       │   └── metal/
│       ├── scene/
│       └── ...
│
├── editor/                     # Editor application (ImGui)
│   ├── CMakeLists.txt
│   ├── include/
│   └── src/
│       ├── main.cpp
│       ├── EditorApp.cpp
│       ├── panels/
│       │   ├── SceneHierarchy.cpp
│       │   ├── Inspector.cpp
│       │   ├── AssetBrowser.cpp
│       │   └── Viewport.cpp
│       └── ...
│
├── runtime/                    # Game runtime executable
│   ├── CMakeLists.txt
│   └── src/
│       └── main.cpp
│
├── tools/                      # Offline tools
│   ├── asset_processor/
│   └── shader_compiler/
│
├── scripts/                    # Lua game scripts
│   ├── main.lua
│   └── entities/
│
├── assets/                     # Raw assets
│   ├── shaders/
│   │   ├── common/
│   │   ├── opengl/
│   │   ├── vulkan/
│   │   └── metal/
│   ├── models/
│   ├── textures/
│   └── ...
│
└── third_party/                # Vendored dependencies (if not using vcpkg)
    └── ...
</div></code></pre>
<h3 id="main-loop-architecture">Main Loop Architecture</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/include/engine/core/Application.hpp</span>

<span class="hljs-keyword">namespace</span> Engine {

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~Application() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
    
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInit</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onShutdown</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onUpdate</span><span class="hljs-params">(<span class="hljs-keyword">float</span> deltaTime)</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFixedUpdate</span><span class="hljs-params">(<span class="hljs-keyword">float</span> fixedDeltaTime)</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRender</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onImGuiRender</span><span class="hljs-params">()</span> </span>{}
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">mainLoop</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;Window&gt; m_window;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;RHI::Device&gt; m_renderDevice;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;ScriptEngine&gt; m_scriptEngine;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;Scene&gt; m_activeScene;
    
    <span class="hljs-keyword">bool</span> m_running = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">double</span> m_lastFrameTime = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">double</span> m_accumulator = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">double</span> FIXED_TIMESTEP = <span class="hljs-number">1.0</span> / <span class="hljs-number">60.0</span>;
};

} <span class="hljs-comment">// namespace Engine</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/src/core/Application.cpp</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Application::run</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Initialize subsystems</span>
    Logger::init();
    m_window = Window::create({<span class="hljs-string">"My Engine"</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>});
    m_renderDevice = RHI::Device::create(RHI::Backend::Vulkan);
    m_scriptEngine = <span class="hljs-built_in">std</span>::make_unique&lt;ScriptEngine&gt;();
    
    onInit();
    
    m_lastFrameTime = m_window-&gt;getTime();
    
    <span class="hljs-keyword">while</span> (m_running &amp;&amp; !m_window-&gt;shouldClose()) {
        mainLoop();
    }
    
    onShutdown();
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Application::mainLoop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Calculate delta time</span>
    <span class="hljs-keyword">double</span> currentTime = m_window-&gt;getTime();
    <span class="hljs-keyword">double</span> deltaTime = currentTime - m_lastFrameTime;
    m_lastFrameTime = currentTime;
    
    <span class="hljs-comment">// Cap delta time to prevent spiral of death</span>
    <span class="hljs-keyword">if</span> (deltaTime &gt; <span class="hljs-number">0.25</span>) deltaTime = <span class="hljs-number">0.25</span>;
    
    <span class="hljs-comment">// Poll input events</span>
    m_window-&gt;pollEvents();
    
    <span class="hljs-comment">// Fixed timestep updates (physics, networking)</span>
    m_accumulator += deltaTime;
    <span class="hljs-keyword">while</span> (m_accumulator &gt;= FIXED_TIMESTEP) {
        onFixedUpdate(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(FIXED_TIMESTEP));
        m_accumulator -= FIXED_TIMESTEP;
    }
    
    <span class="hljs-comment">// Variable timestep update (game logic, animation)</span>
    onUpdate(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(deltaTime));
    
    <span class="hljs-comment">// Render</span>
    m_renderDevice-&gt;beginFrame();
    onRender();
    
    <span class="hljs-comment">// ImGui overlay (editor only)</span>
    ImGui_ImplVulkan_NewFrame();
    ImGui_ImplSDL3_NewFrame();
    ImGui::NewFrame();
    onImGuiRender();
    ImGui::Render();
    
    m_renderDevice-&gt;endFrame();
    m_renderDevice-&gt;present();
}
</div></code></pre>
<hr>
<h2 id="2-graphics-abstraction-design-patterns">2. Graphics Abstraction Design Patterns</h2>
<h3 id="design-philosophy">Design Philosophy</h3>
<p>The Render Hardware Interface (RHI) provides a <strong>thin abstraction</strong> over graphics APIs. Goals:</p>
<ol>
<li><strong>Minimal overhead</strong> - No virtual calls in hot paths</li>
<li><strong>Explicit resource management</strong> - No hidden allocations</li>
<li><strong>Command buffer based</strong> - Deferred execution for multi-threading</li>
<li><strong>Backend agnostic</strong> - Same API for OpenGL, Vulkan, Metal</li>
</ol>
<h3 id="core-types">Core Types</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/include/engine/rhi/Types.hpp</span>

<span class="hljs-keyword">namespace</span> Engine::RHI {

<span class="hljs-comment">// Opaque handles - internally just indices or pointers</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BufferHandle</span> {</span> <span class="hljs-keyword">uint32_t</span> id = UINT32_MAX; <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> id != UINT32_MAX; } };
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TextureHandle</span> {</span> <span class="hljs-keyword">uint32_t</span> id = UINT32_MAX; <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> id != UINT32_MAX; } };
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ShaderHandle</span> {</span> <span class="hljs-keyword">uint32_t</span> id = UINT32_MAX; <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> id != UINT32_MAX; } };
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">PipelineHandle</span> {</span> <span class="hljs-keyword">uint32_t</span> id = UINT32_MAX; <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> id != UINT32_MAX; } };
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RenderPassHandle</span> {</span> <span class="hljs-keyword">uint32_t</span> id = UINT32_MAX; <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{ <span class="hljs-keyword">return</span> id != UINT32_MAX; } };

<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Backend</span> {</span>
    OpenGL,
    Vulkan,
    Metal,
    Auto  <span class="hljs-comment">// Platform default</span>
};

<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BufferUsage</span> :</span> <span class="hljs-keyword">uint32_t</span> {
    Vertex   = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">0</span>,
    Index    = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>,
    Uniform  = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>,
    Storage  = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span>,
    Indirect = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">4</span>,
    Transfer = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">5</span>,
};

<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TextureFormat</span> {</span>
    R8, RG8, RGBA8, RGBA8_SRGB,
    R16F, RG16F, RGBA16F,
    R32F, RG32F, RGBA32F,
    Depth16, Depth24, Depth32F,
    Depth24Stencil8, Depth32FStencil8,
    BC1, BC3, BC5, BC7,  <span class="hljs-comment">// Compressed</span>
};

<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TextureUsage</span> :</span> <span class="hljs-keyword">uint32_t</span> {
    Sampled      = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">0</span>,
    Storage      = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>,
    RenderTarget = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>,
    DepthStencil = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span>,
    TransferSrc  = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">4</span>,
    TransferDst  = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">5</span>,
};

<span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShaderStage</span> :</span> <span class="hljs-keyword">uint32_t</span> {
    Vertex   = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">0</span>,
    Fragment = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>,
    Compute  = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>,
    Geometry = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span>,  <span class="hljs-comment">// Avoid on Mac</span>
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BufferDesc</span> {</span>
    <span class="hljs-keyword">uint64_t</span> size = <span class="hljs-number">0</span>;
    BufferUsage usage = BufferUsage::Vertex;
    <span class="hljs-keyword">bool</span> cpuVisible = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* initialData = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* debugName = <span class="hljs-literal">nullptr</span>;
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TextureDesc</span> {</span>
    <span class="hljs-keyword">uint32_t</span> width = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">uint32_t</span> height = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">uint32_t</span> depth = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">uint32_t</span> mipLevels = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">uint32_t</span> arrayLayers = <span class="hljs-number">1</span>;
    TextureFormat format = TextureFormat::RGBA8;
    TextureUsage usage = TextureUsage::Sampled;
    <span class="hljs-keyword">bool</span> isCubemap = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* debugName = <span class="hljs-literal">nullptr</span>;
};

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ShaderDesc</span> {</span>
    <span class="hljs-built_in">std</span>::span&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>&gt; vertexSpirv;
    <span class="hljs-built_in">std</span>::span&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>&gt; fragmentSpirv;
    <span class="hljs-built_in">std</span>::span&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span>&gt; computeSpirv;  <span class="hljs-comment">// For compute shaders</span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* debugName = <span class="hljs-literal">nullptr</span>;
};

} <span class="hljs-comment">// namespace Engine::RHI</span>
</div></code></pre>
<h3 id="device-interface">Device Interface</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/include/engine/rhi/Device.hpp</span>

<span class="hljs-keyword">namespace</span> Engine::RHI {

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Device</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~Device() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// Factory - creates platform-appropriate backend</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;Device&gt; <span class="hljs-title">create</span><span class="hljs-params">(Backend backend = Backend::Auto)</span></span>;
    
    <span class="hljs-comment">// Resource creation</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> BufferHandle <span class="hljs-title">createBuffer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BufferDesc&amp; desc)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyBuffer</span><span class="hljs-params">(BufferHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span>* <span class="hljs-title">mapBuffer</span><span class="hljs-params">(BufferHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unmapBuffer</span><span class="hljs-params">(BufferHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateBuffer</span><span class="hljs-params">(BufferHandle handle, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* data, <span class="hljs-keyword">uint64_t</span> size, <span class="hljs-keyword">uint64_t</span> offset = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> TextureHandle <span class="hljs-title">createTexture</span><span class="hljs-params">(<span class="hljs-keyword">const</span> TextureDesc&amp; desc)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyTexture</span><span class="hljs-params">(TextureHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateTexture</span><span class="hljs-params">(TextureHandle handle, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span>* data, <span class="hljs-keyword">uint32_t</span> mipLevel = <span class="hljs-number">0</span>, <span class="hljs-keyword">uint32_t</span> arrayLayer = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> ShaderHandle <span class="hljs-title">createShader</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ShaderDesc&amp; desc)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyShader</span><span class="hljs-params">(ShaderHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> PipelineHandle <span class="hljs-title">createGraphicsPipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> GraphicsPipelineDesc&amp; desc)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> PipelineHandle <span class="hljs-title">createComputePipeline</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ComputePipelineDesc&amp; desc)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroyPipeline</span><span class="hljs-params">(PipelineHandle handle)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Per-frame operations</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">beginFrame</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">endFrame</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">present</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Command buffer submission</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> CommandBuffer* <span class="hljs-title">getCommandBuffer</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">submitCommandBuffer</span><span class="hljs-params">(CommandBuffer* cmd)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Utilities</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Backend <span class="hljs-title">getBackend</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* <span class="hljs-title">getDeviceName</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>= <span class="hljs-number">0</span>;
};

} <span class="hljs-comment">// namespace Engine::RHI</span>
</div></code></pre>
<h3 id="command-buffer-stateless-recording">Command Buffer (Stateless Recording)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/include/engine/rhi/CommandBuffer.hpp</span>

<span class="hljs-keyword">namespace</span> Engine::RHI {

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommandBuffer</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-keyword">virtual</span> ~CommandBuffer() = <span class="hljs-keyword">default</span>;
    
    <span class="hljs-comment">// Render pass</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">beginRenderPass</span><span class="hljs-params">(<span class="hljs-keyword">const</span> RenderPassBeginInfo&amp; info)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">endRenderPass</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// State</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindPipeline</span><span class="hljs-params">(PipelineHandle pipeline)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindVertexBuffer</span><span class="hljs-params">(BufferHandle buffer, <span class="hljs-keyword">uint32_t</span> binding = <span class="hljs-number">0</span>, <span class="hljs-keyword">uint64_t</span> offset = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindIndexBuffer</span><span class="hljs-params">(BufferHandle buffer, IndexType type, <span class="hljs-keyword">uint64_t</span> offset = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindUniformBuffer</span><span class="hljs-params">(BufferHandle buffer, <span class="hljs-keyword">uint32_t</span> <span class="hljs-built_in">set</span>, <span class="hljs-keyword">uint32_t</span> binding)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bindTexture</span><span class="hljs-params">(TextureHandle texture, <span class="hljs-keyword">uint32_t</span> <span class="hljs-built_in">set</span>, <span class="hljs-keyword">uint32_t</span> binding)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Dynamic state</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setViewport</span><span class="hljs-params">(<span class="hljs-keyword">float</span> x, <span class="hljs-keyword">float</span> y, <span class="hljs-keyword">float</span> width, <span class="hljs-keyword">float</span> height, <span class="hljs-keyword">float</span> minDepth = <span class="hljs-number">0.0f</span>, <span class="hljs-keyword">float</span> maxDepth = <span class="hljs-number">1.0f</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setScissor</span><span class="hljs-params">(<span class="hljs-keyword">int32_t</span> x, <span class="hljs-keyword">int32_t</span> y, <span class="hljs-keyword">uint32_t</span> width, <span class="hljs-keyword">uint32_t</span> height)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Draw</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> vertexCount, <span class="hljs-keyword">uint32_t</span> instanceCount = <span class="hljs-number">1</span>, <span class="hljs-keyword">uint32_t</span> firstVertex = <span class="hljs-number">0</span>, <span class="hljs-keyword">uint32_t</span> firstInstance = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">drawIndexed</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> indexCount, <span class="hljs-keyword">uint32_t</span> instanceCount = <span class="hljs-number">1</span>, <span class="hljs-keyword">uint32_t</span> firstIndex = <span class="hljs-number">0</span>, <span class="hljs-keyword">int32_t</span> vertexOffset = <span class="hljs-number">0</span>, <span class="hljs-keyword">uint32_t</span> firstInstance = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">drawIndirect</span><span class="hljs-params">(BufferHandle buffer, <span class="hljs-keyword">uint64_t</span> offset, <span class="hljs-keyword">uint32_t</span> drawCount, <span class="hljs-keyword">uint32_t</span> stride)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Compute</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dispatch</span><span class="hljs-params">(<span class="hljs-keyword">uint32_t</span> groupCountX, <span class="hljs-keyword">uint32_t</span> groupCountY, <span class="hljs-keyword">uint32_t</span> groupCountZ)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Barriers &amp; sync</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pipelineBarrier</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BarrierInfo&amp; info)</span> </span>= <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// Copy</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">copyBuffer</span><span class="hljs-params">(BufferHandle src, BufferHandle dst, <span class="hljs-keyword">uint64_t</span> size, <span class="hljs-keyword">uint64_t</span> srcOffset = <span class="hljs-number">0</span>, <span class="hljs-keyword">uint64_t</span> dstOffset = <span class="hljs-number">0</span>)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">copyBufferToTexture</span><span class="hljs-params">(BufferHandle src, TextureHandle dst, <span class="hljs-keyword">const</span> BufferTextureCopyInfo&amp; info)</span> </span>= <span class="hljs-number">0</span>;
};

} <span class="hljs-comment">// namespace Engine::RHI</span>
</div></code></pre>
<h3 id="backend-implementation-example-vulkan">Backend Implementation Example (Vulkan)</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/src/rhi/vulkan/VulkanDevice.cpp</span>

<span class="hljs-keyword">namespace</span> Engine::RHI {

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VulkanDevice</span> :</span> <span class="hljs-keyword">public</span> Device {
<span class="hljs-keyword">public</span>:
    VulkanDevice(Window* window);
    ~VulkanDevice() <span class="hljs-keyword">override</span>;
    
    <span class="hljs-function">BufferHandle <span class="hljs-title">createBuffer</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BufferDesc&amp; desc)</span> <span class="hljs-keyword">override</span> </span>{
        VkBufferCreateInfo bufferInfo{};
        bufferInfo.sType = VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO;
        bufferInfo.size = desc.size;
        bufferInfo.usage = translateBufferUsage(desc.usage);
        bufferInfo.sharingMode = VK_SHARING_MODE_EXCLUSIVE;
        
        VmaAllocationCreateInfo allocInfo{};
        allocInfo.usage = desc.cpuVisible ? VMA_MEMORY_USAGE_CPU_TO_GPU : VMA_MEMORY_USAGE_GPU_ONLY;
        
        VulkanBuffer buffer;
        vmaCreateBuffer(m_allocator, &amp;bufferInfo, &amp;allocInfo, &amp;buffer.handle, &amp;buffer.allocation, <span class="hljs-literal">nullptr</span>);
        
        <span class="hljs-keyword">if</span> (desc.initialData) {
            <span class="hljs-keyword">void</span>* mapped;
            vmaMapMemory(m_allocator, buffer.allocation, &amp;mapped);
            <span class="hljs-built_in">memcpy</span>(mapped, desc.initialData, desc.size);
            vmaUnmapMemory(m_allocator, buffer.allocation);
        }
        
        <span class="hljs-keyword">uint32_t</span> id = m_buffers.size();
        m_buffers.push_back(buffer);
        <span class="hljs-keyword">return</span> BufferHandle{id};
    }
    
<span class="hljs-keyword">private</span>:
    VkInstance m_instance;
    VkDevice m_device;
    VkPhysicalDevice m_physicalDevice;
    VmaAllocator m_allocator;
    VkSwapchainKHR m_swapchain;
    
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;VulkanBuffer&gt; m_buffers;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;VulkanTexture&gt; m_textures;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;VulkanShader&gt; m_shaders;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;VulkanPipeline&gt; m_pipelines;
};

<span class="hljs-comment">// Factory implementation</span>
<span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">unique_ptr</span>&lt;Device&gt; <span class="hljs-title">Device::create</span><span class="hljs-params">(Backend backend)</span> </span>{
    <span class="hljs-keyword">if</span> (backend == Backend::Auto) {
        <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(__APPLE__)</span>
            backend = Backend::Vulkan;  <span class="hljs-comment">// MoltenVK</span>
        <span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> defined(_WIN32)</span>
            backend = Backend::Vulkan;
        <span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
            backend = Backend::OpenGL;
        <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
    }
    
    <span class="hljs-keyword">switch</span> (backend) {
        <span class="hljs-keyword">case</span> Backend::Vulkan: <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::make_unique&lt;VulkanDevice&gt;();
        <span class="hljs-keyword">case</span> Backend::OpenGL: <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::make_unique&lt;OpenGLDevice&gt;();
        <span class="hljs-keyword">case</span> Backend::Metal:  <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::make_unique&lt;MetalDevice&gt;();
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-built_in">std</span>::runtime_error(<span class="hljs-string">"Unknown backend"</span>);
    }
}

} <span class="hljs-comment">// namespace Engine::RHI</span>
</div></code></pre>
<h3 id="shader-cross-compilation-strategy">Shader Cross-Compilation Strategy</h3>
<pre class="hljs"><code><div>GLSL Source (.glsl)
       │
       ▼
┌─────────────────┐
│   glslangValidator  │  → SPIR-V (intermediate)
└─────────────────┘
       │
       ├─────────────────────┬────────────────────┐
       ▼                     ▼                    ▼
┌─────────────┐      ┌─────────────┐      ┌─────────────┐
│ SPIRV-Cross │      │ SPIRV-Cross │      │    Direct   │
│   → GLSL    │      │   → MSL     │      │   SPIR-V    │
└─────────────┘      └─────────────┘      └─────────────┘
       │                     │                    │
       ▼                     ▼                    ▼
   OpenGL              Metal              Vulkan
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment">// tools/shader_compiler/main.cpp</span>

<span class="hljs-comment">// Compile shaders at build time</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>** argv)</span> </span>{
    <span class="hljs-comment">// 1. Read GLSL source</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> vertSrc = readFile(<span class="hljs-string">"shaders/pbr.vert"</span>);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> fragSrc = readFile(<span class="hljs-string">"shaders/pbr.frag"</span>);
    
    <span class="hljs-comment">// 2. Compile to SPIR-V with glslang</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">uint32_t</span>&gt; vertSpirv = compileGLSL(vertSrc, ShaderStage::Vertex);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">uint32_t</span>&gt; fragSpirv = compileGLSL(fragSrc, ShaderStage::Fragment);
    
    <span class="hljs-comment">// 3. Generate backend-specific shaders with SPIRV-Cross</span>
    <span class="hljs-function">spirv_cross::CompilerGLSL <span class="hljs-title">glslCompiler</span><span class="hljs-params">(vertSpirv)</span></span>;
    <span class="hljs-function">spirv_cross::CompilerMSL <span class="hljs-title">mslCompiler</span><span class="hljs-params">(vertSpirv)</span></span>;
    
    <span class="hljs-comment">// 4. Output compiled shaders</span>
    writeFile(<span class="hljs-string">"compiled/pbr.vert.spv"</span>, vertSpirv);
    writeFile(<span class="hljs-string">"compiled/pbr.vert.glsl"</span>, glslCompiler.compile());
    writeFile(<span class="hljs-string">"compiled/pbr.vert.metal"</span>, mslCompiler.compile());
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<hr>
<h2 id="3-imgui--moltenvk-integration">3. ImGui + MoltenVK Integration</h2>
<h3 id="overview">Overview</h3>
<p>Dear ImGui + Vulkan (via MoltenVK on macOS) provides excellent performance and integrates well with the RHI abstraction. ImGui provides official backends for both.</p>
<h3 id="dependencies">Dependencies</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// vcpkg.json</span>
{
  <span class="hljs-attr">"dependencies"</span>: [
    <span class="hljs-string">"imgui"</span>,
    <span class="hljs-string">"imgui[vulkan-binding]"</span>,
    <span class="hljs-string">"imgui[sdl3-binding]"</span>,
    <span class="hljs-string">"vulkan"</span>,
    <span class="hljs-string">"vulkan-memory-allocator"</span>
  ]
}
</div></code></pre>
<h3 id="moltenvk-setup-macos">MoltenVK Setup (macOS)</h3>
<p>MoltenVK is a Vulkan implementation that translates to Metal. Two installation options:</p>
<p><strong>Option A: Vulkan SDK (Recommended)</strong></p>
<pre class="hljs"><code><div><span class="hljs-comment"># Download from https://vulkan.lunarg.com/sdk/home</span>
<span class="hljs-comment"># Installs to /usr/local/share/vulkan/</span>

<span class="hljs-comment"># Set environment variables (add to ~/.zshrc)</span>
<span class="hljs-built_in">export</span> VULKAN_SDK=<span class="hljs-string">"/usr/local/share/vulkan"</span>
<span class="hljs-built_in">export</span> VK_ICD_FILENAMES=<span class="hljs-string">"<span class="hljs-variable">$VULKAN_SDK</span>/icd.d/MoltenVK_icd.json"</span>
<span class="hljs-built_in">export</span> VK_LAYER_PATH=<span class="hljs-string">"<span class="hljs-variable">$VULKAN_SDK</span>/explicit_layer.d"</span>
</div></code></pre>
<p><strong>Option B: vcpkg</strong></p>
<pre class="hljs"><code><div>vcpkg install moltenvk
</div></code></pre>
<h3 id="imgui-initialization">ImGui Initialization</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// editor/src/ImGuiLayer.cpp</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;imgui.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;imgui_impl_sdl3.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;imgui_impl_vulkan.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImGuiLayer</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(SDL_Window* window, VkInstance instance, VkDevice device, 
              VkPhysicalDevice physicalDevice, VkQueue graphicsQueue, 
              <span class="hljs-keyword">uint32_t</span> graphicsQueueFamily, VkRenderPass renderPass)</span> </span>{
        
        <span class="hljs-comment">// Create descriptor pool for ImGui</span>
        VkDescriptorPoolSize poolSizes[] = {
            { VK_DESCRIPTOR_TYPE_SAMPLER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_STORAGE_IMAGE, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_STORAGE_BUFFER, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC, <span class="hljs-number">1000</span> },
            { VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT, <span class="hljs-number">1000</span> }
        };
        
        VkDescriptorPoolCreateInfo poolInfo{};
        poolInfo.sType = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO;
        poolInfo.flags = VK_DESCRIPTOR_POOL_CREATE_FREE_DESCRIPTOR_SET_BIT;
        poolInfo.maxSets = <span class="hljs-number">1000</span>;
        poolInfo.poolSizeCount = <span class="hljs-built_in">std</span>::size(poolSizes);
        poolInfo.pPoolSizes = poolSizes;
        vkCreateDescriptorPool(device, &amp;poolInfo, <span class="hljs-literal">nullptr</span>, &amp;m_descriptorPool);
        
        <span class="hljs-comment">// Initialize ImGui</span>
        IMGUI_CHECKVERSION();
        ImGui::CreateContext();
        ImGuiIO&amp; io = ImGui::GetIO();
        io.ConfigFlags |= ImGuiConfigFlags_NavEnableKeyboard;
        io.ConfigFlags |= ImGuiConfigFlags_DockingEnable;
        io.ConfigFlags |= ImGuiConfigFlags_ViewportsEnable;  <span class="hljs-comment">// Multi-viewport</span>
        
        <span class="hljs-comment">// Style</span>
        ImGui::StyleColorsDark();
        ImGuiStyle&amp; style = ImGui::GetStyle();
        <span class="hljs-keyword">if</span> (io.ConfigFlags &amp; ImGuiConfigFlags_ViewportsEnable) {
            style.WindowRounding = <span class="hljs-number">0.0f</span>;
            style.Colors[ImGuiCol_WindowBg].w = <span class="hljs-number">1.0f</span>;
        }
        
        <span class="hljs-comment">// Platform/Renderer bindings</span>
        ImGui_ImplSDL3_InitForVulkan(window);
        
        ImGui_ImplVulkan_InitInfo initInfo{};
        initInfo.Instance = instance;
        initInfo.PhysicalDevice = physicalDevice;
        initInfo.Device = device;
        initInfo.QueueFamily = graphicsQueueFamily;
        initInfo.Queue = graphicsQueue;
        initInfo.DescriptorPool = m_descriptorPool;
        initInfo.MinImageCount = <span class="hljs-number">2</span>;
        initInfo.ImageCount = <span class="hljs-number">2</span>;
        initInfo.MSAASamples = VK_SAMPLE_COUNT_1_BIT;
        
        ImGui_ImplVulkan_Init(&amp;initInfo, renderPass);
        
        <span class="hljs-comment">// Upload fonts</span>
        VkCommandBuffer cmd = beginSingleTimeCommands();
        ImGui_ImplVulkan_CreateFontsTexture(cmd);
        endSingleTimeCommands(cmd);
        ImGui_ImplVulkan_DestroyFontUploadObjects();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">beginFrame</span><span class="hljs-params">()</span> </span>{
        ImGui_ImplVulkan_NewFrame();
        ImGui_ImplSDL3_NewFrame();
        ImGui::NewFrame();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">endFrame</span><span class="hljs-params">(VkCommandBuffer cmd)</span> </span>{
        ImGui::Render();
        ImGui_ImplVulkan_RenderDrawData(ImGui::GetDrawData(), cmd);
        
        <span class="hljs-comment">// Handle multi-viewport</span>
        ImGuiIO&amp; io = ImGui::GetIO();
        <span class="hljs-keyword">if</span> (io.ConfigFlags &amp; ImGuiConfigFlags_ViewportsEnable) {
            ImGui::UpdatePlatformWindows();
            ImGui::RenderPlatformWindowsDefault();
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shutdown</span><span class="hljs-params">()</span> </span>{
        ImGui_ImplVulkan_Shutdown();
        ImGui_ImplSDL3_Shutdown();
        ImGui::DestroyContext();
        vkDestroyDescriptorPool(m_device, m_descriptorPool, <span class="hljs-literal">nullptr</span>);
    }
    
<span class="hljs-keyword">private</span>:
    VkDevice m_device;
    VkDescriptorPool m_descriptorPool;
};
</div></code></pre>
<h3 id="rendering-imgui-to-a-viewport-texture">Rendering ImGui to a Viewport Texture</h3>
<p>For editor viewports, render the scene to an offscreen texture, then display it in ImGui:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// editor/src/panels/Viewport.cpp</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewportPanel</span> {</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">render</span><span class="hljs-params">(RHI::Device* device, Scene* scene)</span> </span>{
        ImGui::PushStyleVar(ImGuiStyleVar_WindowPadding, ImVec2(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
        ImGui::Begin(<span class="hljs-string">"Viewport"</span>);
        
        <span class="hljs-comment">// Get available size</span>
        ImVec2 viewportSize = ImGui::GetContentRegionAvail();
        
        <span class="hljs-comment">// Resize framebuffer if needed</span>
        <span class="hljs-keyword">if</span> (m_viewportSize.x != viewportSize.x || m_viewportSize.y != viewportSize.y) {
            m_viewportSize = viewportSize;
            recreateFramebuffer(device, (<span class="hljs-keyword">uint32_t</span>)viewportSize.x, (<span class="hljs-keyword">uint32_t</span>)viewportSize.y);
        }
        
        <span class="hljs-comment">// Render scene to offscreen texture</span>
        renderSceneToTexture(device, scene);
        
        <span class="hljs-comment">// Display texture in ImGui</span>
        ImGui::Image(
            (ImTextureID)m_viewportDescriptor,  <span class="hljs-comment">// Vulkan descriptor set</span>
            viewportSize,
            ImVec2(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>),  <span class="hljs-comment">// UV flipped for Vulkan</span>
            ImVec2(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
        );
        
        <span class="hljs-comment">// Handle gizmos, picking, etc.</span>
        <span class="hljs-keyword">if</span> (ImGui::IsWindowHovered()) {
            handleInput();
        }
        
        ImGui::End();
        ImGui::PopStyleVar();
    }
    
<span class="hljs-keyword">private</span>:
    ImVec2 m_viewportSize{<span class="hljs-number">0</span>, <span class="hljs-number">0</span>};
    RHI::TextureHandle m_colorTexture;
    RHI::TextureHandle m_depthTexture;
    VkDescriptorSet m_viewportDescriptor;  <span class="hljs-comment">// For ImGui::Image</span>
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">recreateFramebuffer</span><span class="hljs-params">(RHI::Device* device, <span class="hljs-keyword">uint32_t</span> width, <span class="hljs-keyword">uint32_t</span> height)</span> </span>{
        <span class="hljs-comment">// Destroy old textures</span>
        <span class="hljs-keyword">if</span> (m_colorTexture.isValid()) {
            device-&gt;destroyTexture(m_colorTexture);
            device-&gt;destroyTexture(m_depthTexture);
        }
        
        <span class="hljs-comment">// Create new render targets</span>
        m_colorTexture = device-&gt;createTexture({
            .width = width,
            .height = height,
            .format = RHI::TextureFormat::RGBA8,
            .usage = RHI::TextureUsage::RenderTarget | RHI::TextureUsage::Sampled,
            .debugName = <span class="hljs-string">"Viewport Color"</span>
        });
        
        m_depthTexture = device-&gt;createTexture({
            .width = width,
            .height = height,
            .format = RHI::TextureFormat::Depth32F,
            .usage = RHI::TextureUsage::DepthStencil,
            .debugName = <span class="hljs-string">"Viewport Depth"</span>
        });
        
        <span class="hljs-comment">// Create ImGui texture descriptor</span>
        m_viewportDescriptor = ImGui_ImplVulkan_AddTexture(
            m_sampler, 
            m_colorTextureView, 
            VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL
        );
    }
};
</div></code></pre>
<hr>
<h2 id="4-lua-scripting-architecture">4. Lua Scripting Architecture</h2>
<h3 id="design-goals">Design Goals</h3>
<ol>
<li><strong>Hot-reload</strong> - Modify scripts without restarting</li>
<li><strong>Safe sandboxing</strong> - Scripts can't crash the engine</li>
<li><strong>Native performance</strong> - Hot paths stay in C++</li>
<li><strong>Ergonomic API</strong> - Clean Lua syntax for game logic</li>
</ol>
<h3 id="sol2-integration">sol2 Integration</h3>
<p><a href="https://github.com/ThePhD/sol2">sol2</a> is a modern C++17 Lua binding library. Header-only, fast, and safe.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/include/engine/scripting/ScriptEngine.hpp</span>

<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sol/sol.hpp&gt;</span></span>

<span class="hljs-keyword">namespace</span> Engine {

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScriptEngine</span> {</span>
<span class="hljs-keyword">public</span>:
    ScriptEngine();
    ~ScriptEngine();
    
    <span class="hljs-comment">// Core API</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">shutdown</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-keyword">float</span> deltaTime)</span></span>;
    
    <span class="hljs-comment">// Script loading</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loadScript</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; path)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reloadScripts</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// Expose C++ to Lua</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
    <span class="hljs-keyword">void</span> <span class="hljs-title">registerType</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; name)</span></span>;
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">registerFunction</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; name, sol::function func)</span></span>;
    
    <span class="hljs-comment">// Call Lua from C++</span>
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Ret, <span class="hljs-keyword">typename</span>... Args&gt;
    Ret <span class="hljs-title">call</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; funcName, Args&amp;&amp;... args)</span></span>;
    
    <span class="hljs-function">sol::state&amp; <span class="hljs-title">getLua</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_lua; }
    
<span class="hljs-keyword">private</span>:
    sol::state m_lua;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt; m_loadedScripts;
    
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setupSandbox</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">registerCoreAPI</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">registerMathAPI</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">registerECSAPI</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">registerInputAPI</span><span class="hljs-params">()</span></span>;
};

} <span class="hljs-comment">// namespace Engine</span>
</div></code></pre>
<h3 id="exposing-engine-types-to-lua">Exposing Engine Types to Lua</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// engine/src/scripting/ScriptEngine.cpp</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::init</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Open standard libraries (sandboxed)</span>
    m_lua.open_libraries(
        sol::lib::base,
        sol::lib::math,
        sol::lib::<span class="hljs-built_in">string</span>,
        sol::lib::table,
        sol::lib::coroutine
    );
    
    <span class="hljs-comment">// Disable dangerous functions</span>
    setupSandbox();
    
    <span class="hljs-comment">// Register engine API</span>
    registerCoreAPI();
    registerMathAPI();
    registerECSAPI();
    registerInputAPI();
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::setupSandbox</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Remove dangerous functions</span>
    m_lua[<span class="hljs-string">"os"</span>] = sol::nil;
    m_lua[<span class="hljs-string">"io"</span>] = sol::nil;
    m_lua[<span class="hljs-string">"dofile"</span>] = sol::nil;
    m_lua[<span class="hljs-string">"loadfile"</span>] = sol::nil;
    m_lua[<span class="hljs-string">"load"</span>] = sol::nil;  <span class="hljs-comment">// Can be re-enabled with restrictions</span>
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::registerMathAPI</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// vec3</span>
    <span class="hljs-keyword">auto</span> vec3_type = m_lua.new_usertype&lt;glm::vec3&gt;(<span class="hljs-string">"vec3"</span>,
        sol::constructors&lt;
            glm::vec3(),
            glm::vec3(<span class="hljs-keyword">float</span>),
            glm::vec3(<span class="hljs-keyword">float</span>, <span class="hljs-keyword">float</span>, <span class="hljs-keyword">float</span>)
        &gt;(),
        <span class="hljs-string">"x"</span>, &amp;glm::vec3::x,
        <span class="hljs-string">"y"</span>, &amp;glm::vec3::y,
        <span class="hljs-string">"z"</span>, &amp;glm::vec3::z,
        sol::meta_function::addition, [](<span class="hljs-keyword">const</span> glm::vec3&amp; a, <span class="hljs-keyword">const</span> glm::vec3&amp; b) { <span class="hljs-keyword">return</span> a + b; },
        sol::meta_function::subtraction, [](<span class="hljs-keyword">const</span> glm::vec3&amp; a, <span class="hljs-keyword">const</span> glm::vec3&amp; b) { <span class="hljs-keyword">return</span> a - b; },
        sol::meta_function::multiplication, sol::overload(
            [](<span class="hljs-keyword">const</span> glm::vec3&amp; v, <span class="hljs-keyword">float</span> s) { <span class="hljs-keyword">return</span> v * s; },
            [](<span class="hljs-keyword">float</span> s, <span class="hljs-keyword">const</span> glm::vec3&amp; v) { <span class="hljs-keyword">return</span> s * v; }
        ),
        <span class="hljs-string">"length"</span>, [](<span class="hljs-keyword">const</span> glm::vec3&amp; v) { <span class="hljs-keyword">return</span> glm::length(v); },
        <span class="hljs-string">"normalize"</span>, [](<span class="hljs-keyword">const</span> glm::vec3&amp; v) { <span class="hljs-keyword">return</span> glm::normalize(v); },
        <span class="hljs-string">"dot"</span>, [](<span class="hljs-keyword">const</span> glm::vec3&amp; a, <span class="hljs-keyword">const</span> glm::vec3&amp; b) { <span class="hljs-keyword">return</span> glm::dot(a, b); },
        <span class="hljs-string">"cross"</span>, [](<span class="hljs-keyword">const</span> glm::vec3&amp; a, <span class="hljs-keyword">const</span> glm::vec3&amp; b) { <span class="hljs-keyword">return</span> glm::cross(a, b); }
    );
    
    <span class="hljs-comment">// quat</span>
    <span class="hljs-keyword">auto</span> quat_type = m_lua.new_usertype&lt;glm::quat&gt;(<span class="hljs-string">"quat"</span>,
        sol::constructors&lt;
            glm::quat(),
            glm::quat(<span class="hljs-keyword">float</span>, <span class="hljs-keyword">float</span>, <span class="hljs-keyword">float</span>, <span class="hljs-keyword">float</span>)
        &gt;(),
        <span class="hljs-string">"x"</span>, &amp;glm::quat::x,
        <span class="hljs-string">"y"</span>, &amp;glm::quat::y,
        <span class="hljs-string">"z"</span>, &amp;glm::quat::z,
        <span class="hljs-string">"w"</span>, &amp;glm::quat::w,
        sol::meta_function::multiplication, [](<span class="hljs-keyword">const</span> glm::quat&amp; q, <span class="hljs-keyword">const</span> glm::vec3&amp; v) { <span class="hljs-keyword">return</span> q * v; },
        <span class="hljs-string">"euler"</span>, [](<span class="hljs-keyword">float</span> pitch, <span class="hljs-keyword">float</span> yaw, <span class="hljs-keyword">float</span> roll) { 
            <span class="hljs-keyword">return</span> glm::quat(glm::vec3(pitch, yaw, roll)); 
        },
        <span class="hljs-string">"lookAt"</span>, [](<span class="hljs-keyword">const</span> glm::vec3&amp; forward, <span class="hljs-keyword">const</span> glm::vec3&amp; up) {
            <span class="hljs-keyword">return</span> glm::quatLookAt(forward, up);
        }
    );
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::registerECSAPI</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Entity</span>
    <span class="hljs-keyword">auto</span> entity_type = m_lua.new_usertype&lt;Entity&gt;(<span class="hljs-string">"Entity"</span>,
        sol::no_constructor,  <span class="hljs-comment">// Created by Scene</span>
        <span class="hljs-string">"id"</span>, sol::readonly(&amp;Entity::id),
        <span class="hljs-string">"valid"</span>, &amp;Entity::isValid,
        <span class="hljs-string">"destroy"</span>, &amp;Entity::destroy
    );
    
    <span class="hljs-comment">// Transform component</span>
    <span class="hljs-keyword">auto</span> transform_type = m_lua.new_usertype&lt;TransformComponent&gt;(<span class="hljs-string">"Transform"</span>,
        sol::no_constructor,
        <span class="hljs-string">"position"</span>, &amp;TransformComponent::position,
        <span class="hljs-string">"rotation"</span>, &amp;TransformComponent::rotation,
        <span class="hljs-string">"scale"</span>, &amp;TransformComponent::scale,
        <span class="hljs-string">"forward"</span>, &amp;TransformComponent::getForward,
        <span class="hljs-string">"right"</span>, &amp;TransformComponent::getRight,
        <span class="hljs-string">"up"</span>, &amp;TransformComponent::getUp,
        <span class="hljs-string">"lookAt"</span>, &amp;TransformComponent::lookAt,
        <span class="hljs-string">"translate"</span>, &amp;TransformComponent::translate,
        <span class="hljs-string">"rotate"</span>, &amp;TransformComponent::rotate
    );
    
    <span class="hljs-comment">// Scene</span>
    <span class="hljs-keyword">auto</span> scene_type = m_lua.new_usertype&lt;Scene&gt;(<span class="hljs-string">"Scene"</span>,
        sol::no_constructor,
        <span class="hljs-string">"createEntity"</span>, &amp;Scene::createEntity,
        <span class="hljs-string">"destroyEntity"</span>, &amp;Scene::destroyEntity,
        <span class="hljs-string">"findEntity"</span>, &amp;Scene::findEntityByName,
        <span class="hljs-string">"getTransform"</span>, &amp;Scene::getComponent&lt;TransformComponent&gt;,
        <span class="hljs-string">"getMeshRenderer"</span>, &amp;Scene::getComponent&lt;MeshRendererComponent&gt;,
        <span class="hljs-string">"getRigidBody"</span>, &amp;Scene::getComponent&lt;RigidBodyComponent&gt;
    );
    
    <span class="hljs-comment">// Expose current scene</span>
    m_lua[<span class="hljs-string">"Scene"</span>] = m_lua.create_table_with(
        <span class="hljs-string">"current"</span>, [<span class="hljs-keyword">this</span>]() { <span class="hljs-keyword">return</span> Application::get().getActiveScene(); }
    );
}

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::registerInputAPI</span><span class="hljs-params">()</span> </span>{
    m_lua[<span class="hljs-string">"Input"</span>] = m_lua.create_table_with(
        <span class="hljs-string">"isKeyDown"</span>, &amp;Input::isKeyDown,
        <span class="hljs-string">"isKeyPressed"</span>, &amp;Input::isKeyPressed,
        <span class="hljs-string">"isKeyReleased"</span>, &amp;Input::isKeyReleased,
        <span class="hljs-string">"isMouseButtonDown"</span>, &amp;Input::isMouseButtonDown,
        <span class="hljs-string">"getMousePosition"</span>, &amp;Input::getMousePosition,
        <span class="hljs-string">"getMouseDelta"</span>, &amp;Input::getMouseDelta,
        <span class="hljs-string">"getAxis"</span>, &amp;Input::getAxis  <span class="hljs-comment">// For gamepad/virtual axes</span>
    );
    
    <span class="hljs-comment">// Key codes</span>
    m_lua[<span class="hljs-string">"Key"</span>] = m_lua.create_table_with(
        <span class="hljs-string">"W"</span>, Key::W, <span class="hljs-string">"A"</span>, Key::A, <span class="hljs-string">"S"</span>, Key::S, <span class="hljs-string">"D"</span>, Key::D,
        <span class="hljs-string">"Space"</span>, Key::Space, <span class="hljs-string">"Shift"</span>, Key::LeftShift,
        <span class="hljs-string">"Escape"</span>, Key::Escape
        <span class="hljs-comment">// ... etc</span>
    );
}
</div></code></pre>
<h3 id="example-lua-script">Example Lua Script</h3>
<pre class="hljs"><code><div><span class="hljs-comment">-- scripts/player.lua</span>

<span class="hljs-keyword">local</span> Player = {}
Player.<span class="hljs-built_in">__index</span> = Player

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Player.new</span><span class="hljs-params">(entity)</span></span>
    <span class="hljs-keyword">local</span> self = <span class="hljs-built_in">setmetatable</span>({}, Player)
    self.entity = entity
    self.transform = Scene.current():getTransform(entity)
    self.speed = <span class="hljs-number">5.0</span>
    self.jumpForce = <span class="hljs-number">10.0</span>
    self.isGrounded = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> self
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Player:update</span><span class="hljs-params">(dt)</span></span>
    <span class="hljs-comment">-- Movement</span>
    <span class="hljs-keyword">local</span> moveDir = vec3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
    
    <span class="hljs-keyword">if</span> Input.isKeyDown(Key.W) <span class="hljs-keyword">then</span> moveDir.z = moveDir.z - <span class="hljs-number">1</span> <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> Input.isKeyDown(Key.S) <span class="hljs-keyword">then</span> moveDir.z = moveDir.z + <span class="hljs-number">1</span> <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> Input.isKeyDown(Key.A) <span class="hljs-keyword">then</span> moveDir.x = moveDir.x - <span class="hljs-number">1</span> <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> Input.isKeyDown(Key.D) <span class="hljs-keyword">then</span> moveDir.x = moveDir.x + <span class="hljs-number">1</span> <span class="hljs-keyword">end</span>
    
    <span class="hljs-keyword">if</span> moveDir:length() &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
        moveDir = moveDir:normalize()
        <span class="hljs-keyword">local</span> forward = self.transform:forward()
        <span class="hljs-keyword">local</span> right = self.transform:right()
        
        <span class="hljs-keyword">local</span> worldDir = forward * moveDir.z + right * moveDir.x
        self.transform:translate(worldDir * self.speed * dt)
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-comment">-- Jump</span>
    <span class="hljs-keyword">if</span> self.isGrounded <span class="hljs-keyword">and</span> Input.isKeyPressed(Key.Space) <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">local</span> rb = Scene.current():getRigidBody(self.entity)
        <span class="hljs-keyword">if</span> rb <span class="hljs-keyword">then</span>
            rb:addImpulse(vec3(<span class="hljs-number">0</span>, self.jumpForce, <span class="hljs-number">0</span>))
        <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    
    <span class="hljs-comment">-- Look</span>
    <span class="hljs-keyword">local</span> mouseDelta = Input.getMouseDelta()
    <span class="hljs-keyword">if</span> mouseDelta:length() &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
        self.transform:rotate(vec3(-mouseDelta.y * <span class="hljs-number">0.002</span>, -mouseDelta.x * <span class="hljs-number">0.002</span>, <span class="hljs-number">0</span>))
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> Player
</div></code></pre>
<h3 id="hot-reloading">Hot-Reloading</h3>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ScriptEngine::reloadScripts</span><span class="hljs-params">()</span> </span>{
    LOG_INFO(<span class="hljs-string">"Reloading scripts..."</span>);
    
    <span class="hljs-comment">// Clear current script state (but keep registered types)</span>
    m_lua.collect_garbage();
    
    <span class="hljs-comment">// Reload all scripts</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span>&amp; path : m_loadedScripts) {
        <span class="hljs-keyword">try</span> {
            m_lua.script_file(path);
            LOG_INFO(<span class="hljs-string">"Reloaded: {}"</span>, path);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-keyword">const</span> sol::error&amp; e) {
            LOG_ERROR(<span class="hljs-string">"Script error in {}: {}"</span>, path, e.what());
        }
    }
    
    <span class="hljs-comment">// Call onReload hook if defined</span>
    <span class="hljs-keyword">if</span> (m_lua[<span class="hljs-string">"onReload"</span>].valid()) {
        m_lua[<span class="hljs-string">"onReload"</span>]();
    }
}

<span class="hljs-comment">// In editor, watch for file changes</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">EditorApp::onUpdate</span><span class="hljs-params">(<span class="hljs-keyword">float</span> dt)</span> </span>{
    <span class="hljs-keyword">if</span> (m_fileWatcher.hasChanges(<span class="hljs-string">"scripts/"</span>)) {
        m_scriptEngine-&gt;reloadScripts();
    }
}
</div></code></pre>
<hr>
<h2 id="5-build-system-setup-cmake--vcpkg">5. Build System Setup (CMake + vcpkg)</h2>
<h3 id="vcpkg-setup">vcpkg Setup</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Clone vcpkg</span>
git <span class="hljs-built_in">clone</span> https://github.com/microsoft/vcpkg.git
<span class="hljs-built_in">cd</span> vcpkg &amp;&amp; ./bootstrap-vcpkg.sh

<span class="hljs-comment"># Set environment variable (add to ~/.zshrc)</span>
<span class="hljs-built_in">export</span> VCPKG_ROOT=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/vcpkg"</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">$VCPKG_ROOT</span>:<span class="hljs-variable">$PATH</span>"</span>
</div></code></pre>
<h3 id="vcpkgjson-manifest-mode">vcpkg.json (Manifest Mode)</h3>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"https://raw.githubusercontent.com/microsoft/vcpkg-tool/main/docs/vcpkg.schema.json"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"my-engine"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.1.0"</span>,
  <span class="hljs-attr">"dependencies"</span>: [
    <span class="hljs-string">"glm"</span>,
    <span class="hljs-string">"glfw3"</span>,
    <span class="hljs-string">"sdl3"</span>,
    <span class="hljs-string">"vulkan"</span>,
    <span class="hljs-string">"vulkan-memory-allocator"</span>,
    <span class="hljs-string">"imgui"</span>,
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"imgui"</span>,
      <span class="hljs-attr">"features"</span>: [<span class="hljs-string">"vulkan-binding"</span>, <span class="hljs-string">"sdl3-binding"</span>, <span class="hljs-string">"docking-experimental"</span>]
    },
    <span class="hljs-string">"spdlog"</span>,
    <span class="hljs-string">"nlohmann-json"</span>,
    <span class="hljs-string">"entt"</span>,
    <span class="hljs-string">"lua"</span>,
    <span class="hljs-string">"sol2"</span>,
    <span class="hljs-string">"stb"</span>,
    <span class="hljs-string">"tinygltf"</span>,
    <span class="hljs-string">"spirv-cross"</span>,
    <span class="hljs-string">"glslang"</span>,
    <span class="hljs-string">"joltphysics"</span>,
    <span class="hljs-string">"miniaudio"</span>
  ],
  <span class="hljs-attr">"overrides"</span>: [
    { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"imgui"</span>, <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.90.1"</span> }
  ]
}
</div></code></pre>
<h3 id="root-cmakeliststxt">Root CMakeLists.txt</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.25</span>)

<span class="hljs-comment"># Use vcpkg toolchain</span>
<span class="hljs-keyword">if</span>(<span class="hljs-keyword">DEFINED</span> ENV{VCPKG_ROOT})
    <span class="hljs-keyword">set</span>(CMAKE_TOOLCHAIN_FILE <span class="hljs-string">"$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake"</span> CACHE <span class="hljs-keyword">STRING</span> <span class="hljs-string">""</span>)
<span class="hljs-keyword">endif</span>()

<span class="hljs-keyword">project</span>(MyEngine VERSION <span class="hljs-number">0.1</span>.<span class="hljs-number">0</span> LANGUAGES CXX)

<span class="hljs-comment"># C++20</span>
<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">20</span>)
<span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD_REQUIRED <span class="hljs-keyword">ON</span>)
<span class="hljs-keyword">set</span>(CMAKE_CXX_EXTENSIONS <span class="hljs-keyword">OFF</span>)

<span class="hljs-comment"># Output directories</span>
<span class="hljs-keyword">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY <span class="hljs-variable">${CMAKE_BINARY_DIR}</span>/bin)
<span class="hljs-keyword">set</span>(CMAKE_LIBRARY_OUTPUT_DIRECTORY <span class="hljs-variable">${CMAKE_BINARY_DIR}</span>/lib)
<span class="hljs-keyword">set</span>(CMAKE_ARCHIVE_OUTPUT_DIRECTORY <span class="hljs-variable">${CMAKE_BINARY_DIR}</span>/lib)

<span class="hljs-comment"># Options</span>
<span class="hljs-keyword">option</span>(ENGINE_BUILD_EDITOR <span class="hljs-string">"Build the editor application"</span> <span class="hljs-keyword">ON</span>)
<span class="hljs-keyword">option</span>(ENGINE_BUILD_TESTS <span class="hljs-string">"Build unit tests"</span> <span class="hljs-keyword">ON</span>)
<span class="hljs-keyword">option</span>(ENGINE_ENABLE_VULKAN <span class="hljs-string">"Enable Vulkan backend"</span> <span class="hljs-keyword">ON</span>)
<span class="hljs-keyword">option</span>(ENGINE_ENABLE_METAL <span class="hljs-string">"Enable Metal backend (macOS only)"</span> <span class="hljs-variable">${APPLE}</span>)
<span class="hljs-keyword">option</span>(ENGINE_ENABLE_OPENGL <span class="hljs-string">"Enable OpenGL backend"</span> <span class="hljs-keyword">ON</span>)

<span class="hljs-comment"># Find packages</span>
<span class="hljs-keyword">find_package</span>(Vulkan REQUIRED)
<span class="hljs-keyword">find_package</span>(glm CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(glfw3 CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(SDL3 CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(imgui CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(spdlog CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(nlohmann_json CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(EnTT CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(lua CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(sol2 CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(Stb REQUIRED)
<span class="hljs-keyword">find_package</span>(unofficial-spirv-cross CONFIG REQUIRED)
<span class="hljs-keyword">find_package</span>(unofficial-vulkan-memory-allocator CONFIG REQUIRED)

<span class="hljs-comment"># Subdirectories</span>
<span class="hljs-keyword">add_subdirectory</span>(engine)
<span class="hljs-keyword">add_subdirectory</span>(runtime)

<span class="hljs-keyword">if</span>(ENGINE_BUILD_EDITOR)
    <span class="hljs-keyword">add_subdirectory</span>(editor)
<span class="hljs-keyword">endif</span>()

<span class="hljs-keyword">if</span>(ENGINE_BUILD_TESTS)
    <span class="hljs-keyword">enable_testing</span>()
    <span class="hljs-keyword">add_subdirectory</span>(tests)
<span class="hljs-keyword">endif</span>()

<span class="hljs-keyword">add_subdirectory</span>(tools)
</div></code></pre>
<h3 id="engine-library-cmakeliststxt">Engine Library CMakeLists.txt</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># engine/CMakeLists.txt</span>

<span class="hljs-keyword">set</span>(ENGINE_SOURCES
    src/core/Application.cpp
    src/core/Logger.cpp
    src/core/Window.cpp
    
    src/rhi/Device.cpp
    src/rhi/opengl/OpenGLDevice.cpp
    src/rhi/vulkan/VulkanDevice.cpp
    src/rhi/vulkan/VulkanCommandBuffer.cpp
    
    src/scene/Scene.cpp
    src/scene/Entity.cpp
    src/scene/Components.cpp
    
    src/scripting/ScriptEngine.cpp
    
    src/assets/AssetManager.cpp
    src/assets/TextureLoader.cpp
    src/assets/ModelLoader.cpp
)

<span class="hljs-keyword">set</span>(ENGINE_HEADERS
    <span class="hljs-keyword">include</span>/engine/Engine.hpp
    <span class="hljs-keyword">include</span>/engine/core/Application.hpp
    <span class="hljs-keyword">include</span>/engine/core/Logger.hpp
    <span class="hljs-keyword">include</span>/engine/core/Types.hpp
    <span class="hljs-keyword">include</span>/engine/rhi/RHI.hpp
    <span class="hljs-keyword">include</span>/engine/rhi/Device.hpp
    <span class="hljs-keyword">include</span>/engine/rhi/Buffer.hpp
    <span class="hljs-keyword">include</span>/engine/rhi/Texture.hpp
    <span class="hljs-keyword">include</span>/engine/scene/Scene.hpp
    <span class="hljs-keyword">include</span>/engine/scene/Entity.hpp
    <span class="hljs-keyword">include</span>/engine/scripting/ScriptEngine.hpp
)

<span class="hljs-comment"># Metal backend (macOS only)</span>
<span class="hljs-keyword">if</span>(APPLE <span class="hljs-keyword">AND</span> ENGINE_ENABLE_METAL)
    <span class="hljs-keyword">list</span>(APPEND ENGINE_SOURCES
        src/rhi/metal/MetalDevice.mm
        src/rhi/metal/MetalCommandBuffer.mm
    )
<span class="hljs-keyword">endif</span>()

<span class="hljs-keyword">add_library</span>(Engine STATIC <span class="hljs-variable">${ENGINE_SOURCES}</span> <span class="hljs-variable">${ENGINE_HEADERS}</span>)

<span class="hljs-keyword">target_include_directories</span>(Engine
    PUBLIC
        $&lt;BUILD_INTERFACE:<span class="hljs-variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/<span class="hljs-keyword">include</span>&gt;
        $&lt;INSTALL_INTERFACE:<span class="hljs-keyword">include</span>&gt;
    PRIVATE
        <span class="hljs-variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/src
)

<span class="hljs-keyword">target_link_libraries</span>(Engine
    PUBLIC
        glm::glm
        EnTT::EnTT
        spdlog::spdlog
    PRIVATE
        Vulkan::Vulkan
        unofficial::vulkan-memory-allocator::vulkan-memory-allocator
        SDL3::SDL3
        imgui::imgui
        sol2
        lua::lua
        unofficial::spirv-cross::spirv-cross-core
        unofficial::spirv-cross::spirv-cross-glsl
        unofficial::spirv-cross::spirv-cross-msl
)

<span class="hljs-comment"># Platform-specific</span>
<span class="hljs-keyword">if</span>(APPLE)
    <span class="hljs-keyword">target_link_libraries</span>(Engine PRIVATE
        <span class="hljs-string">"-framework Metal"</span>
        <span class="hljs-string">"-framework MetalKit"</span>
        <span class="hljs-string">"-framework Cocoa"</span>
        <span class="hljs-string">"-framework QuartzCore"</span>
    )
<span class="hljs-keyword">endif</span>()

<span class="hljs-keyword">target_compile_definitions</span>(Engine
    PUBLIC
        $&lt;$&lt;BOOL:<span class="hljs-variable">${ENGINE_ENABLE_VULKAN}</span>&gt;:ENGINE_VULKAN&gt;
        $&lt;$&lt;BOOL:<span class="hljs-variable">${ENGINE_ENABLE_METAL}</span>&gt;:ENGINE_METAL&gt;
        $&lt;$&lt;BOOL:<span class="hljs-variable">${ENGINE_ENABLE_OPENGL}</span>&gt;:ENGINE_OPENGL&gt;
)

<span class="hljs-comment"># Precompiled header</span>
target_precompile_headers(Engine PRIVATE
    &lt;<span class="hljs-keyword">string</span>&gt;
    &lt;vector&gt;
    &lt;memory&gt;
    &lt;unordered_map&gt;
    &lt;functional&gt;
    &lt;glm/glm.hpp&gt;
    &lt;spdlog/spdlog.h&gt;
)
</div></code></pre>
<h3 id="cmake-presets">CMake Presets</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// CMakePresets.json</span>
{
  <span class="hljs-attr">"version"</span>: <span class="hljs-number">6</span>,
  <span class="hljs-attr">"configurePresets"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"base"</span>,
      <span class="hljs-attr">"hidden"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"generator"</span>: <span class="hljs-string">"Ninja Multi-Config"</span>,
      <span class="hljs-attr">"binaryDir"</span>: <span class="hljs-string">"${sourceDir}/build"</span>,
      <span class="hljs-attr">"cacheVariables"</span>: {
        <span class="hljs-attr">"CMAKE_EXPORT_COMPILE_COMMANDS"</span>: <span class="hljs-string">"ON"</span>
      }
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"macos"</span>,
      <span class="hljs-attr">"inherits"</span>: <span class="hljs-string">"base"</span>,
      <span class="hljs-attr">"displayName"</span>: <span class="hljs-string">"macOS (Vulkan + Metal)"</span>,
      <span class="hljs-attr">"cacheVariables"</span>: {
        <span class="hljs-attr">"ENGINE_ENABLE_VULKAN"</span>: <span class="hljs-string">"ON"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_METAL"</span>: <span class="hljs-string">"ON"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_OPENGL"</span>: <span class="hljs-string">"OFF"</span>
      },
      <span class="hljs-attr">"condition"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"equals"</span>,
        <span class="hljs-attr">"lhs"</span>: <span class="hljs-string">"${hostSystemName}"</span>,
        <span class="hljs-attr">"rhs"</span>: <span class="hljs-string">"Darwin"</span>
      }
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"windows"</span>,
      <span class="hljs-attr">"inherits"</span>: <span class="hljs-string">"base"</span>,
      <span class="hljs-attr">"displayName"</span>: <span class="hljs-string">"Windows (Vulkan)"</span>,
      <span class="hljs-attr">"cacheVariables"</span>: {
        <span class="hljs-attr">"ENGINE_ENABLE_VULKAN"</span>: <span class="hljs-string">"ON"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_METAL"</span>: <span class="hljs-string">"OFF"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_OPENGL"</span>: <span class="hljs-string">"ON"</span>
      },
      <span class="hljs-attr">"condition"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"equals"</span>,
        <span class="hljs-attr">"lhs"</span>: <span class="hljs-string">"${hostSystemName}"</span>,
        <span class="hljs-attr">"rhs"</span>: <span class="hljs-string">"Windows"</span>
      }
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"linux"</span>,
      <span class="hljs-attr">"inherits"</span>: <span class="hljs-string">"base"</span>,
      <span class="hljs-attr">"displayName"</span>: <span class="hljs-string">"Linux (Vulkan)"</span>,
      <span class="hljs-attr">"cacheVariables"</span>: {
        <span class="hljs-attr">"ENGINE_ENABLE_VULKAN"</span>: <span class="hljs-string">"ON"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_METAL"</span>: <span class="hljs-string">"OFF"</span>,
        <span class="hljs-attr">"ENGINE_ENABLE_OPENGL"</span>: <span class="hljs-string">"ON"</span>
      },
      <span class="hljs-attr">"condition"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"equals"</span>,
        <span class="hljs-attr">"lhs"</span>: <span class="hljs-string">"${hostSystemName}"</span>,
        <span class="hljs-attr">"rhs"</span>: <span class="hljs-string">"Linux"</span>
      }
    }
  ],
  <span class="hljs-attr">"buildPresets"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"debug"</span>,
      <span class="hljs-attr">"configurePreset"</span>: <span class="hljs-string">"macos"</span>,
      <span class="hljs-attr">"configuration"</span>: <span class="hljs-string">"Debug"</span>
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"release"</span>,
      <span class="hljs-attr">"configurePreset"</span>: <span class="hljs-string">"macos"</span>,
      <span class="hljs-attr">"configuration"</span>: <span class="hljs-string">"Release"</span>
    }
  ]
}
</div></code></pre>
<h3 id="build-commands">Build Commands</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># Configure</span>
cmake --preset macos

<span class="hljs-comment"># Build</span>
cmake --build build --config Debug

<span class="hljs-comment"># Build with specific target</span>
cmake --build build --config Release --target Editor

<span class="hljs-comment"># Run</span>
./build/bin/Debug/Editor
</div></code></pre>
<hr>
<h2 id="6-ide-setup-and-development-workflow">6. IDE Setup and Development Workflow</h2>
<h3 id="recommended-ides">Recommended IDEs</h3>
<table>
<thead>
<tr>
<th>IDE</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CLion</strong> ⭐</td>
<td>Best CMake support, refactoring, debugging</td>
<td>Paid ($89/yr personal)</td>
</tr>
<tr>
<td><strong>VS Code + clangd</strong></td>
<td>Free, lightweight, great LSP</td>
<td>Debugging setup more complex</td>
</tr>
<tr>
<td><strong>Xcode</strong></td>
<td>Native Mac, Metal debugging</td>
<td>Poor CMake support, no Windows</td>
</tr>
<tr>
<td><strong>Visual Studio</strong></td>
<td>Best on Windows</td>
<td>Mac version limited</td>
</tr>
</tbody>
</table>
<h3 id="vs-code-setup-recommended-for-mac">VS Code Setup (Recommended for Mac)</h3>
<p><strong>Extensions:</strong></p>
<ul>
<li><strong>clangd</strong> - C++ language server (better than Microsoft C++ extension)</li>
<li><strong>CMake Tools</strong> - CMake integration</li>
<li><strong>CodeLLDB</strong> - Debugging</li>
<li><strong>Shader languages</strong> - GLSL/HLSL syntax</li>
</ul>
<p><strong>.vscode/settings.json:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"cmake.configureOnOpen"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"cmake.buildDirectory"</span>: <span class="hljs-string">"${workspaceFolder}/build"</span>,
  <span class="hljs-attr">"cmake.generator"</span>: <span class="hljs-string">"Ninja Multi-Config"</span>,
  
  <span class="hljs-attr">"clangd.arguments"</span>: [
    <span class="hljs-string">"--background-index"</span>,
    <span class="hljs-string">"--clang-tidy"</span>,
    <span class="hljs-string">"--header-insertion=never"</span>,
    <span class="hljs-string">"--completion-style=detailed"</span>,
    <span class="hljs-string">"--function-arg-placeholders=false"</span>
  ],
  
  <span class="hljs-attr">"files.associations"</span>: {
    <span class="hljs-attr">"*.glsl"</span>: <span class="hljs-string">"glsl"</span>,
    <span class="hljs-attr">"*.vert"</span>: <span class="hljs-string">"glsl"</span>,
    <span class="hljs-attr">"*.frag"</span>: <span class="hljs-string">"glsl"</span>,
    <span class="hljs-attr">"*.metal"</span>: <span class="hljs-string">"cpp"</span>
  },
  
  <span class="hljs-attr">"[cpp]"</span>: {
    <span class="hljs-attr">"editor.formatOnSave"</span>: <span class="hljs-literal">true</span>
  }
}
</div></code></pre>
<p><strong>.vscode/launch.json:</strong></p>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Editor"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"lldb"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"program"</span>: <span class="hljs-string">"${workspaceFolder}/build/bin/Debug/Editor"</span>,
      <span class="hljs-attr">"args"</span>: [],
      <span class="hljs-attr">"cwd"</span>: <span class="hljs-string">"${workspaceFolder}"</span>,
      <span class="hljs-attr">"env"</span>: {
        <span class="hljs-attr">"VULKAN_SDK"</span>: <span class="hljs-string">"/usr/local/share/vulkan"</span>,
        <span class="hljs-attr">"VK_ICD_FILENAMES"</span>: <span class="hljs-string">"/usr/local/share/vulkan/icd.d/MoltenVK_icd.json"</span>
      }
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Runtime"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"lldb"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"program"</span>: <span class="hljs-string">"${workspaceFolder}/build/bin/Debug/Runtime"</span>,
      <span class="hljs-attr">"args"</span>: [<span class="hljs-string">"--scene"</span>, <span class="hljs-string">"assets/scenes/test.scene"</span>],
      <span class="hljs-attr">"cwd"</span>: <span class="hljs-string">"${workspaceFolder}"</span>
    }
  ]
}
</div></code></pre>
<h3 id="clang-format">.clang-format</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># .clang-format</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">Language:</span> <span class="hljs-string">Cpp</span>
<span class="hljs-attr">BasedOnStyle:</span> <span class="hljs-string">LLVM</span>
<span class="hljs-attr">AccessModifierOffset:</span> <span class="hljs-number">-4</span>
<span class="hljs-attr">AlignAfterOpenBracket:</span> <span class="hljs-string">Align</span>
<span class="hljs-attr">AlignConsecutiveAssignments:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">AlignConsecutiveMacros:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">AlignOperands:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">AlignTrailingComments:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">AllowAllParametersOfDeclarationOnNextLine:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">AllowShortBlocksOnASingleLine:</span> <span class="hljs-string">Empty</span>
<span class="hljs-attr">AllowShortCaseLabelsOnASingleLine:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">AllowShortFunctionsOnASingleLine:</span> <span class="hljs-string">Inline</span>
<span class="hljs-attr">AllowShortIfStatementsOnASingleLine:</span> <span class="hljs-string">Never</span>
<span class="hljs-attr">AllowShortLoopsOnASingleLine:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">AlwaysBreakTemplateDeclarations:</span> <span class="hljs-literal">Yes</span>
<span class="hljs-attr">BinPackArguments:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">BinPackParameters:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">BreakBeforeBraces:</span> <span class="hljs-string">Attach</span>
<span class="hljs-attr">BreakConstructorInitializers:</span> <span class="hljs-string">BeforeColon</span>
<span class="hljs-attr">ColumnLimit:</span> <span class="hljs-number">120</span>
<span class="hljs-attr">IndentCaseLabels:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">IndentWidth:</span> <span class="hljs-number">4</span>
<span class="hljs-attr">NamespaceIndentation:</span> <span class="hljs-string">None</span>
<span class="hljs-attr">PointerAlignment:</span> <span class="hljs-string">Left</span>
<span class="hljs-attr">SortIncludes:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">SortUsingDeclarations:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">SpaceAfterCStyleCast:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpaceAfterTemplateKeyword:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpaceBeforeAssignmentOperators:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">SpaceBeforeParens:</span> <span class="hljs-string">ControlStatements</span>
<span class="hljs-attr">SpaceInEmptyParentheses:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpacesInAngles:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpacesInContainerLiterals:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpacesInParentheses:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">SpacesInSquareBrackets:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">Standard:</span> <span class="hljs-string">c++20</span>
<span class="hljs-attr">TabWidth:</span> <span class="hljs-number">4</span>
<span class="hljs-attr">UseTab:</span> <span class="hljs-string">Never</span>
<span class="hljs-string">...</span>
</div></code></pre>
<h3 id="clangd">.clangd</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># .clangd</span>
<span class="hljs-attr">CompileFlags:</span>
  <span class="hljs-attr">Add:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">-std=c++20</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">-Wall</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">-Wextra</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">-Wpedantic</span>
  <span class="hljs-attr">Remove:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">-W*</span>  <span class="hljs-comment"># Remove warnings added by compile_commands.json</span>

<span class="hljs-attr">Diagnostics:</span>
  <span class="hljs-attr">ClangTidy:</span>
    <span class="hljs-attr">Add:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">modernize-*</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">performance-*</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">bugprone-*</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cppcoreguidelines-*</span>
    <span class="hljs-attr">Remove:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">modernize-use-trailing-return-type</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cppcoreguidelines-avoid-magic-numbers</span>

<span class="hljs-attr">Index:</span>
  <span class="hljs-attr">Background:</span> <span class="hljs-string">Build</span>

<span class="hljs-attr">InlayHints:</span>
  <span class="hljs-attr">Enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">ParameterNames:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">DeducedTypes:</span> <span class="hljs-literal">true</span>
</div></code></pre>
<h3 id="development-workflow">Development Workflow</h3>
<pre class="hljs"><code><div><span class="hljs-comment"># 1. Initial setup</span>
git <span class="hljs-built_in">clone</span> &lt;repo&gt;
<span class="hljs-built_in">cd</span> engine
cmake --preset macos

<span class="hljs-comment"># 2. Daily development</span>
cmake --build build --config Debug -j$(sysctl -n hw.ncpu)
./build/bin/Debug/Editor

<span class="hljs-comment"># 3. Before commit</span>
cmake --build build --config Release
ctest --<span class="hljs-built_in">test</span>-dir build --build-config Release

<span class="hljs-comment"># 4. Format code</span>
find engine editor runtime -name <span class="hljs-string">"*.cpp"</span> -o -name <span class="hljs-string">"*.hpp"</span> | xargs clang-format -i

<span class="hljs-comment"># 5. Profile (Instruments on Mac)</span>
cmake --build build --config RelWithDebInfo
open -a Instruments ./build/bin/RelWithDebInfo/Editor
</div></code></pre>
<hr>
<h2 id="appendix-recommended-libraries">Appendix: Recommended Libraries</h2>
<h3 id="core">Core</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Library</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Math</strong></td>
<td><a href="https://github.com/g-truc/glm">GLM</a></td>
<td>Header-only, GLSL-like syntax</td>
</tr>
<tr>
<td><strong>Window/Input</strong></td>
<td><a href="https://libsdl.org/">SDL3</a></td>
<td>Cross-platform, mature</td>
</tr>
<tr>
<td><strong>Logging</strong></td>
<td><a href="https://github.com/gabime/spdlog">spdlog</a></td>
<td>Fast, fmt-based</td>
</tr>
<tr>
<td><strong>JSON</strong></td>
<td><a href="https://github.com/nlohmann/json">nlohmann/json</a></td>
<td>Intuitive API</td>
</tr>
<tr>
<td><strong>ECS</strong></td>
<td><a href="https://github.com/skypjack/entt">EnTT</a></td>
<td>Fast, header-only</td>
</tr>
</tbody>
</table>
<h3 id="graphics">Graphics</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Library</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Vulkan Memory</strong></td>
<td><a href="https://github.com/GPUOpen-LibrariesAndSDKs/VulkanMemoryAllocator">VMA</a></td>
<td>AMD, essential for Vulkan</td>
</tr>
<tr>
<td><strong>SPIR-V</strong></td>
<td><a href="https://github.com/KhronosGroup/SPIRV-Cross">SPIRV-Cross</a></td>
<td>Shader reflection + cross-compilation</td>
</tr>
<tr>
<td><strong>GLSL Compiler</strong></td>
<td><a href="https://github.com/KhronosGroup/glslang">glslang</a></td>
<td>GLSL → SPIR-V</td>
</tr>
<tr>
<td><strong>Image Loading</strong></td>
<td><a href="https://github.com/nothings/stb">stb_image</a></td>
<td>Single header</td>
</tr>
<tr>
<td><strong>Model Loading</strong></td>
<td><a href="https://github.com/syoyo/tinygltf">tinygltf</a></td>
<td>glTF 2.0</td>
</tr>
<tr>
<td><strong>Font Rendering</strong></td>
<td><a href="https://freetype.org/">FreeType</a> + <a href="https://github.com/Chlumsky/msdf-atlas-gen">msdf-atlas-gen</a></td>
<td>SDF fonts</td>
</tr>
</tbody>
</table>
<h3 id="scripting--ui">Scripting &amp; UI</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Library</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Scripting</strong></td>
<td><a href="https://www.lua.org/">Lua 5.4</a> + <a href="https://github.com/ThePhD/sol2">sol2</a></td>
<td>Clean C++ binding</td>
</tr>
<tr>
<td><strong>Editor UI</strong></td>
<td><a href="https://github.com/ocornut/imgui">Dear ImGui</a></td>
<td>Immediate mode, docking branch</td>
</tr>
<tr>
<td><strong>In-game UI</strong></td>
<td><a href="https://github.com/mikke89/RmlUi">RmlUi</a></td>
<td>HTML/CSS-like, retained mode</td>
</tr>
</tbody>
</table>
<h3 id="physics--audio">Physics &amp; Audio</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Library</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Physics</strong></td>
<td><a href="https://github.com/jrouwe/JoltPhysics">Jolt</a></td>
<td>Modern, well-documented, used by Horizon</td>
</tr>
<tr>
<td><strong>Audio</strong></td>
<td><a href="https://github.com/mackron/miniaudio">miniaudio</a></td>
<td>Single header, cross-platform</td>
</tr>
</tbody>
</table>
<h3 id="utilities">Utilities</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Library</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>File Watching</strong></td>
<td><a href="https://github.com/SpartanJ/efsw">efsw</a></td>
<td>Cross-platform</td>
</tr>
<tr>
<td><strong>Profiling</strong></td>
<td><a href="https://github.com/wolfpld/tracy">Tracy</a></td>
<td>Real-time profiler</td>
</tr>
<tr>
<td><strong>Testing</strong></td>
<td><a href="https://github.com/catchorg/Catch2">Catch2</a></td>
<td>Header-only</td>
</tr>
<tr>
<td><strong>Reflection</strong></td>
<td><a href="https://github.com/veselink1/refl-cpp">refl-cpp</a></td>
<td>Compile-time reflection</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="quick-start-checklist">Quick Start Checklist</h2>
<pre class="hljs"><code><div>[ ] Install Xcode Command Line Tools: xcode-select --install
[ ] Install Homebrew: /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
[ ] Install dependencies: brew install cmake ninja
[ ] Clone vcpkg: git clone https://github.com/microsoft/vcpkg.git ~/vcpkg
[ ] Bootstrap vcpkg: ~/vcpkg/bootstrap-vcpkg.sh
[ ] Set VCPKG_ROOT: echo 'export VCPKG_ROOT=&quot;$HOME/vcpkg&quot;' &gt;&gt; ~/.zshrc
[ ] Install Vulkan SDK from https://vulkan.lunarg.com/sdk/home
[ ] Configure: cmake --preset macos
[ ] Build: cmake --build build --config Debug
[ ] Run: ./build/bin/Debug/Editor
</div></code></pre>
<hr>
<p><em>Document last updated: January 2026</em></p>

</body>
</html>
